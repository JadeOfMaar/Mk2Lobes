PART
{
	name = mk2l-engsj
	module = Part
	author = JadeOfMaar
	MODEL
	{
		model = Mk2Lobes/Parts/engsj
	}
	rescaleFactor = 1
	node_attach = 0, 0, 0, 0, 0, -1
	TechRequired = aerospaceTech
	entryCost = 24998
	cost = 24998
	category = Engine
	subcategory = 0
	title = #LOC_mk2l-engsj-title
	manufacturer = #LOC_mk2l-agent
	description = #LOC_mk2l-engsj-desc
	tags = #LOC_mk2l-engsj-tags
	attachRules = 1,1,1,1,0

	mass = 4.261
	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.2
	angularDrag = 2
	bulkheadProfiles = mk2l,srf
	crashTolerance = 5
	breakingForce = 800
	breakingTorque = 800
	maxTemp = 2400
	skinMaxTemp = 2400
	
	CoMOffset = 0, 0, -0.42
	CoLOffset = 0, 0, -0.42
	CoPOffset = 0, 0, -0.42
	CenterOfBuoyancy = 0, 0, -0.42
	CenterOfDisplacement = 0, 0, -0.42
	NODE
	{
		name = side01
		transform = s01
		size = 1
		method = FIXED_JOINT
	}
	
	MODULE
	{
		name = ModuleResourceIntake
		resourceName = IntakeAir
		checkForOxygen = True
		area = 0.005
		intakeSpeed = 30
		intakeTransformName = intakeTransform
		machCurve
		{
			key = 2 1 0 0
			key = 6 3 0 0
		}
	}
	RESOURCE
	{
		name = IntakeAir
		amount = 5
		maxAmount = 5
	}
	MODULE
	{
		name = MultiModeEngine
		// primaryEngineID = AirBreathing
		// primaryEngineModeDisplayName = AirBreathing
		// secondaryEngineID = ClosedCycle
		// secondaryEngineModeDisplayName = ClosedCycle
		primaryEngineID = ClosedCycle
		primaryEngineModeDisplayName = ClosedCycle
		secondaryEngineID = AirBreathing
		secondaryEngineModeDisplayName = AirBreathing
	}
	MODULE
	{
		name = ModuleEnginesFX
		engineID = ClosedCycle
		runningEffectName = running_closed
		thrustVectorTransformName = thrustTransform
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 350
		heatProduction = 133
		useEngineResponseTime = True
		engineAccelerationSpeed = 9
		engineDecelerationSpeed = 8
		EngineType = LiquidFuel
		exhaustDamageDistanceOffset = 0.19
		powerEffectName = running_closed
		useVelCurveIsp = True
		PROPELLANT
		{
			name = LiquidFuel
			resourceFlowMode = STAGE_STACK_FLOW_BALANCE
			ratio = 0.9
			DrawGauge = True
		}
		PROPELLANT
		{
			name = Oxidizer
			resourceFlowMode = STAGE_STACK_FLOW_BALANCE
			ratio = 1.1
		}
		velCurveIsp
		{
			key = 0.1 1 0 0
			key = 2 1.7 0 0
		}
		atmosphereCurve
		{
			key = 0 315
			key = 1 283
			key = 13.9 0.001
		}
	}
	MODULE
	{
		name = ModuleEnginesFX
		engineID = AirBreathing
		thrustVectorTransformName = thrustTransform
		exhaustDamage = True
		ignitionThreshold = 0.33
		minThrust = 0
		maxThrust = 350
		heatProduction = 60
		useEngineResponseTime = True
		engineAccelerationSpeed = 5
		engineDecelerationSpeed = 3
		engineSpoolIdle = 0.05
		engineSpoolTime = 2.0
		EngineType = Turbine
		exhaustDamageMultiplier = 50
		exhaustDamageDistanceOffset = 0.19
		clampPropReceived = True
		atmChangeFlow = True
		useVelCurve = True
		useVelCurveIsp = True
		useAtmCurve = True
		flowMultCap = 6.0
		powerEffectName = running_open
		PROPELLANT
		{
			name = IntakeAir
			ignoreForIsp = True
			ratio = 6
		}
		PROPELLANT
		{
			name = LiquidFuel
			resourceFlowMode = STAGE_STACK_FLOW_BALANCE
			ratio = 1
			DrawGauge = True
		}
		atmosphereCurve
		{
			key = 0 2106 0 0
		}
		velCurve
		{
			// key = 1 0
			// key = 1.5 0.4
			// key = 2 0.8
			// key = 4 5.6
			// key = 6 4.4
			// key = 12 0.8
			// key = 20 0 0 0
			key = 1 0
			key = 1.5 0.4
			key = 2 0.8
			key = 4 2
			key = 6 1.6
			key = 12 0.4
			key = 20 0 0 0

		}
		velCurveIsp
		{
			key = 5 1
			key = 12 0.74
		}
		atmCurve
		{
			key = 0 1
			key = 1 0.9
			key = 10 0.001
		}
	}
	MODULE
	{
		name = FXModuleAnimateThrottle
		animationName = rocketModeSwitch
		responseSpeed = 0.05
		layer = 1
		dependOnEngineState = True
		dependOnThrottle = False
		engineName = ClosedCycle
		weightOnOperational = True
	}
	MODULE
	{
		name = FXModuleThrottleEffects
		fxModuleNames = heatColor
		responseSpeed = 0.5
		dependOnEngineState = True
		dependOnThrottle = True
		preferMultiMode = True
	}
	MODULE
	{
		name = FXModuleThrottleEffects
		fxModuleNames = throttleColor
		responseSpeed = 1.0
		dependOnEngineState = True
		dependOnThrottle = True
		preferMultiMode = True
		// engineName = ClosedCycle
	}
	MODULE
	{
		name = ModuleColorChanger
		moduleID = heatColor
		animRate = 0.025
		shaderProperty = _EmissiveColor
		excludedRenderer = ThrEMM
		toggleInEditor = false
		toggleInFlight = false
		redCurve
		{
			key = 0 0
			key = 0.5 0.33
			key = 1 1
		}
		greenCurve
		{
			key = 0.5 0
			key = 1 0.25
		}
		blueCurve
		{
			key = 0 0
			key = 1 0
		}
		alphaCurve
		{
			key = 0 1
			key = 1 1
		}
	}
	MODULE
	{
		name = ModuleColorChanger
		moduleID = throttleColor
		animRate = 1
		shaderProperty = _TintColor
		includedRenderer = ThrEMM
		toggleInEditor = false
		toggleInFlight = false
		redCurve
		{
			key = 0 0
			key = 1 1
		}
		greenCurve
		{
			key = 0 0 0 0
			key = 0.5 0 0 0.5
			key = 1 0.25
		}
		blueCurve
		{
			key = 0 0 0 0
			key = 0.5 0 0 1
			key = 1 0.5
		}
		alphaCurve
		{
			key = 0 1
			key = 1 1
		}
	}
	EFFECTS
	{
		running_closed
		{
			AUDIO
			{
				channel = Ship
				clip = sound_rocket_spurts
				volume = 0.0 0.0
				volume = 1.0 1.0
				pitch = 0.0 0.2
				pitch = 1.0 1.0
				loop = true
			}
			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_veryLarge
				transformName = thrustTransform // smokePoint
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.25
				speed = 1.0 1.0
				localOffset = 0, 0, 1
			}
			MODEL_MULTI_PARTICLE
			{
				name = core
				modelName = Mk2Lobes/FX/BlueOrigin/keroVacLamp
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.5 1.0
				speed = 0.2 0.4
				speed = 1.0 1.0
				localPosition = 0, 0, 0.5
			}
			MODEL_MULTI_PARTICLE
			{
				name = stream
				modelName = Mk2Lobes/FX/BlueOrigin/keroVacBlaze
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 1.0 1.0
				speed = 0.2 0.4
				speed = 1.0 1.0
				localPosition = 0, 0, 0.5
			}
		}
		running_open
		{			
			AUDIO
			{
				channel = Ship
				clip = sound_jet_deep
				volume = 0.0 0.0
				volume = 0.05 0.4
				volume = 1.0 1.5
				pitch = 0.0 0.3
				pitch = 1.0 0.5
				loop = true
			}
			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_light
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.25
				speed = 1.0 1.0
				localOffset = 0, 0, 1
				localRotation = 1, 0, 0, -90
			}
			MODEL_MULTI_PARTICLE
			{
				name = core
				modelName = Mk2Lobes/FX/Generic/keroOlympusLamp
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.5 1.0
				energy = 1 1
				energy = 2 1.5
				speed = 0.2 0.4
				speed = 1.0 1.0
				localPosition = 0, 0, 0.5
			}
			MODEL_MULTI_PARTICLE
			{
				name = stream
				modelName = Mk2Lobes/FX/Generic/keroOlympusBlaze
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 1.0 1.5
				speed = 0.2 0.4
				speed = 1.0 2
				speed = 2.0 5
				localPosition = 0, 0, 0.5
			}
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
		flameout
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = thrustTransform // smokePoint
				oneShot = true
			}
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
	}
	MODULE
	{
		name = ModuleLiftingSurface
		useInternalDragModel = False
		deflectionLiftCoeff = 1.5
		transformDir = X
		dragAtMaxAoA = 0.3
		dragAtMinAoA = 0.1
	}
}